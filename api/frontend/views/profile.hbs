<!DOCTYPE html>
<html lang="uz">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Profil</title>
    <link rel="stylesheet" href="../assets/css/style.css">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600&display=swap" rel="stylesheet">
    <link type="image/x-icon" href="../assets/images/favicon-3.png" rel="icon" />
    <link rel="stylesheet" href="https://site-assets.fontawesome.com/releases/v6.7.2/css/all.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css">
</head>

<body>

    <div id="error-popup" class="error-popup">
        <div class="popup-content">
            <span id="error-close" class="popup-close"></span>
            <i class="fa-solid fa-triangle-exclamation" style=" font-size: 36px; color: #e74c3c;"></i>
            <h3>Xatolik</h3>
            <p id="error-message"></p>
            <button id="popup_button" onclick="closeErrorPopup()">Yopish</button>
        </div>
    </div>

    <div class="background"></div>
    <header class="header container">
        <a href="/" class="logo">
            <h1><span>Lime</span>Go</h1>
        </a>
        <div class="about">
            <a href="tel:+998998483737">Texnik yordam: +998 (99) 555-15-65</a>
            <div class="lang-selector">
                <button class="lang-btn">
                    <img src="https://upload.wikimedia.org/wikipedia/commons/8/84/Flag_of_Uzbekistan.svg"
                        alt="Oʻzbekcha" width="20"> <span>UZ</span>
                    <i class="fa fa-caret-down"></i>
                </button>
                <ul class="lang-menu">
                    <li>
                        <a href="/profile">
                            <img src="https://upload.wikimedia.org/wikipedia/commons/8/84/Flag_of_Uzbekistan.svg"
                                alt="Oʻzbekcha" width="20"> Uzb
                        </a>
                    </li>
                    <li>
                        <a href="/profile/ru">
                            <img src="https://upload.wikimedia.org/wikipedia/en/thumb/f/f3/Flag_of_Russia.svg/330px-Flag_of_Russia.svg.png"
                                alt="Русский" width="20"> Rus
                        </a>
                    </li>
                    <li>
                        <a href="/profile/en">
                            <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/a/a5/Flag_of_the_United_Kingdom_%281-2%29.svg/1200px-Flag_of_the_United_Kingdom_%281-2%29.svg.png"
                                alt="English" width="20"> En
                        </a>
                    </li>
                </ul>
            </div>
            <!-- Til tanlash dropdown -->
            <a href="/login">
                <button type="submit" id="login-btn">
                    <i class="fa-regular fa-right-to-bracket"></i> Kirish
                </button>
            </a>
            <span id="user-name" style="display: none;">
                <span id="username"></span>
            </span>
            <div id="user-menu" class="dropdown-menu">
                <a href="/profile" id="profile"><i class="fa-solid fa-user"></i> Profil</a>
                <a href="/ticket" id="tickets"><i class="fa-solid fa-ticket"></i> Chiptalarim</a>
                <a href="/logout" id="logout"><i class="fa-solid fa-right-from-bracket"></i> Chiqish</a>
            </div>
        </div>
    </header>

    <div class="profile-layout">
        <div class="profile-sidebar">
            <div class="avatar-wrapper">
                <img src="" alt="Profile Picture" id="avatar">
            </div>
            <input type="file" id="pic-upload" accept="image/*" hidden>

            <button type="button" id="img-edit-btn" class="btn-upload">
                <i class="fa-solid fa-camera"></i> Rasmni yangilash
            </button>

            <!-- Yangi: backenddagi rasmi bo'lsa ko'rinadigan o'chirish tugmasi -->
            <button type="button" id="img-delete-existing-btn" class="btn-delete-existing hidden">
                <i class="fa-solid fa-trash"></i> Rasmi o‘chirish
            </button>

            <div id="img-action-buttons" class="hidden">
                <button type="button" id="img-save-btn" class="btn-img-save">
                    <i class="fa-solid fa-floppy-disk"></i> Saqlash
                </button>
                <button type="button" id="img-cancel-btn" class="btn-img-cancel">
                    <i class="fa-solid fa-xmark-large"></i> Bekor qilish
                </button>
            </div>
            <!-- … mavjud kod … -->
            <div class="display-name" id="display-name">—</div>
        </div>
        <div class="profile-details">
            <div class="fields">
                <div class="field"><label>Ism</label><input type="text" id="first-name" disabled>
                    <div class="error-text hidden" id="error-first-name">Majburiy</div>
                </div>
                <div class="field"><label>Familiya</label><input type="text" id="last-name" disabled>
                    <div class="error-text hidden" id="error-last-name">Majburiy</div>
                </div>
                <div class="field"><label>Telefon raqam</label><input type="text" id="phone" disabled
                        placeholder="+(998) __ ___ __ __">
                    <div class="error-text hidden" id="error-phone">Majburiy</div>
                </div>
                <div class="field"><label>Passport №</label><input type="text" id="passport" disabled
                        placeholder="AS#######">
                    <div class="error-text hidden" id="error-passport">Majburiy</div>
                </div>
                <div class="field">
                    <label>Jins</label>
                    <select id="gender" disabled>
                        <option value="">— Tanlang —</option>
                        <option value="male">Erkak</option>
                        <option value="female">Ayol</option>
                    </select>
                    <div class="error-text hidden" id="error-gender">Majburiy</div>
                </div>
                <div class="field-group">
                    <div class="field"><label>Karta №</label><input type="text" id="card-number" disabled
                            placeholder="#### #### #### ####">
                        <div class="error-text hidden" id="error-card-number">Majburiy</div>
                    </div>
                    <div class="field"><label>Amal qilish muddati</label><input type="text" id="card-expiry" disabled
                            placeholder="MM/YY">
                        <div class="error-text hidden" id="error-card-expiry">Majburiy</div>
                    </div>
                </div>
            </div>
            <div class="buttons">
                <button class="btn btn-edit" id="edit-btn"><i class="fa-solid fa-pen-to-square"></i> Tahrirlash</button>
                <button class="btn btn-save hidden" id="save-btn"><i class="fa-solid fa-floppy-disk"></i>
                    Saqlash</button>
                <button class="btn btn-cancel hidden" id="cancel-btn"><i class="fa-solid fa-xmark-large"></i> Bekor
                    qilish</button>
            </div>
        </div>
    </div>


    <script src="../js/profile.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>
    <script src="../js/index.js" defer></script>
</body>

</html>